{"ast":null,"code":"import React,{useState}from'react';import{registerUser,loginUser}from'../api.js';// Import API functions\nimport'./Login.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[isSignUp,setIsSignUp]=useState(false);const[formData,setFormData]=useState({name:'',email:'',password:''});const[message,setMessage]=useState('');// State for success/error messages\nconst handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});};const handleSubmit=async e=>{e.preventDefault();try{if(isSignUp){// Map `name` to `fullName` for backend compatibility\nconst payload={fullName:formData.name,email:formData.email,password:formData.password};const response=await registerUser(payload);// Call register API\nsetMessage(response.data);// Show success message\n}else{const payload={email:formData.email,password:formData.password};const response=await loginUser(payload);// Call login API\nsetMessage('Login successful!');localStorage.setItem('token',response.data.Token);// Save token to localStorage\n}}catch(error){var _error$response;setMessage(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||'An error occurred');// Display error message\n}};const handleGoogleLogin=()=>{// Redirect to backend Google login endpoint\nwindow.location.href=\"http://localhost:5000/api/auth/google-login\";};return/*#__PURE__*/_jsx(\"div\",{className:\"login-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isSignUp?'Sign Up':'Login'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[isSignUp&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",value:formData.name,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",placeholder:\"Email\",value:formData.email,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formData.password,onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isSignUp?'Sign Up':'Login'})]}),/*#__PURE__*/_jsx(\"button\",{className:\"switch-button\",onClick:()=>setIsSignUp(!isSignUp),children:isSignUp?'Switch to Login':'Switch to Sign Up'}),/*#__PURE__*/_jsx(\"button\",{className:\"google-login-button\",onClick:handleGoogleLogin,children:\"Login with Google\"}),message&&/*#__PURE__*/_jsx(\"p\",{children:message})]})});}export default Login;","map":{"version":3,"names":["React","useState","registerUser","loginUser","jsx","_jsx","jsxs","_jsxs","Login","isSignUp","setIsSignUp","formData","setFormData","name","email","password","message","setMessage","handleChange","e","target","value","handleSubmit","preventDefault","payload","fullName","response","data","localStorage","setItem","Token","error","_error$response","handleGoogleLogin","window","location","href","className","children","onSubmit","type","placeholder","onChange","required","onClick"],"sources":["/Users/pradnya/DePaul Courses/CSC 436 Web Applications/ecommerce-app/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { registerUser, loginUser } from '../api.js'; // Import API functions\nimport './Login.css';\n\nfunction Login() {\n  const [isSignUp, setIsSignUp] = useState(false);\n  const [formData, setFormData] = useState({ name: '', email: '', password: '' });\n  const [message, setMessage] = useState(''); // State for success/error messages\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (isSignUp) {\n        // Map `name` to `fullName` for backend compatibility\n        const payload = {\n          fullName: formData.name,\n          email: formData.email,\n          password: formData.password,\n        };\n        const response = await registerUser(payload); // Call register API\n        setMessage(response.data); // Show success message\n      } else {\n        const payload = {\n          email: formData.email,\n          password: formData.password,\n        };\n        const response = await loginUser(payload); // Call login API\n        setMessage('Login successful!');\n        localStorage.setItem('token', response.data.Token); // Save token to localStorage\n      }\n    } catch (error) {\n      setMessage(error.response?.data || 'An error occurred'); // Display error message\n    }\n  };\n\n  const handleGoogleLogin = () => {\n    // Redirect to backend Google login endpoint\n    window.location.href = \"http://localhost:5000/api/auth/google-login\";\n  };\n\n  return (\n    <div className=\"login-container\">\n      <div className=\"login-form\">\n        <h2>{isSignUp ? 'Sign Up' : 'Login'}</h2>\n        <form onSubmit={handleSubmit}>\n          {isSignUp && (\n            <input\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Name\"\n              value={formData.name}\n              onChange={handleChange}\n              required\n            />\n          )}\n          <input\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            value={formData.email}\n            onChange={handleChange}\n            required\n          />\n          <input\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n            value={formData.password}\n            onChange={handleChange}\n            required\n          />\n          <button type=\"submit\">{isSignUp ? 'Sign Up' : 'Login'}</button>\n        </form>\n        <button className=\"switch-button\" onClick={() => setIsSignUp(!isSignUp)}>\n          {isSignUp ? 'Switch to Login' : 'Switch to Sign Up'}\n        </button>\n        <button className=\"google-login-button\" onClick={handleGoogleLogin}>\n          Login with Google\n        </button>\n        {message && <p>{message}</p>}\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}